<div class="relative mb-4 max-w-full">
  <label for="input_a" class="label"> {{ label() }} </label>
  <div class="flex flex-wrap mb-2">
    @for (option of selectedOptionList; track option.value) {
    <span
      class="bg-gray-200 text-gray-800 text-3xs font-medium me-2 px-2 py-0.5 rounded-full flex items-center text-nowrap mb-2"
      (click)="removeSelectedOption(option.value)"
    >
      <div class="mr-1">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="20px"
          viewBox="0 -960 960 960"
          width="20px"
          fill="#646567"
        >
          <path
            d="m337-304 143-143 143 143 33-33-143-143 143-143-33-33-143 143-143-143-33 33 143 143-143 143 33 33Zm143.17 188q-74.81 0-141.21-28.41T222.73-222.6q-49.84-49.78-78.28-116.09Q116-405.01 116-479.83q0-76.07 28.47-142.19t78.35-116.13q49.88-50 116.09-77.92Q405.13-844 479.83-844q76.06 0 142.17 27.89 66.12 27.89 116.13 77.85 50.02 49.96 77.94 116.02Q844-556.18 844-480.09q0 75.09-27.89 141.15t-77.84 115.99q-49.94 49.94-115.98 78.45Q556.24-116 480.17-116Zm-.17-46q132.51 0 225.26-92.74Q798-347.49 798-480t-92.74-225.26Q612.51-798 480-798t-225.26 92.74Q162-612.51 162-480t92.74 225.26Q347.49-162 480-162Zm0-318Z"
          />
        </svg>
      </div>
      {{ option.name }}
    </span>
    }
  </div>
  <div class="relative">
    <input
      cdkOverlayOrigin
      #trigger="cdkOverlayOrigin"
      type="text"
      [(ngModel)]="optionValue"
      class="input"
      (focus)="onFocus()"
    />
    <ng-template
      cdkConnectedOverlay
      (overlayOutsideClick)="onBlur()"
      [cdkConnectedOverlayOrigin]="trigger"
      [cdkConnectedOverlayOpen]="showOptions"
    >
      <ul
        class="bg-white w-80 border border-slate-300 shadow-lg shadow-zinc-400 rounded"
      >
        @for (option of filterOptions; track $index) {
        <li
          class="px-3 flex justify-between"
        >
          <span class="flex-1 py-2" (click)="onClickOption(option)">{{ option.name }}</span>
          <span class="w-6 py-2 flex items-center justify-center" (click)="onClickDeleteOption(option.value)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#00000"
            >
              <path
                d="m334-296 146-146 146 146 38-38-146-146 146-146-38-38-146 146-146-146-38 38 146 146-146 146 38 38Zm146.17 196q-78.81 0-148.21-29.91T211.23-211.1q-51.34-51.28-81.28-120.59Q100-401.01 100-479.83q0-79.07 29.97-148.69t81.35-121.13q51.38-51.5 120.59-80.92Q401.13-860 479.83-860q79.06 0 148.67 29.39 69.62 29.39 121.13 80.85 51.52 51.46 80.94 121.02Q860-559.18 860-480.09t-29.39 148.15q-29.39 69.06-80.84 120.49-51.44 51.44-120.98 81.45-69.55 30-148.62 30Zm-.17-54q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"
              />
            </svg>
          </span>
        </li>
        }
      </ul>
    </ng-template>
    <button
      type="button"
      class="absolute top-0.5 right-0 text-white bg-blue-700 font-medium rounded-lg text-sm px-4 py-2 me-2 mb-2"
      (click)="addOption()"
    >
      加入
    </button>
  </div>
</div>
